@use '../../styles/scss/Font-Exact.module.scss' as FontExact;
@use './index.scss';

/* Card Detail Module SCSS */

.controlBtn {
  display: inline-flex;
  align-items: center;
  gap: 0.375rem;
  padding: 0.5rem 0.75rem;
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 8px;
  color: hsl(var(--foreground));
  @include FontExact.exact-korean-font('size-075') /* was: 0.75rem */;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  backdrop-filter: blur(10px);
  white-space: nowrap;

  svg {
    width: 0.875rem;
    height: 0.875rem;
    flex-shrink: 0;
  }

  &:hover {
    background: rgba(255, 255, 255, 0.2);
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  }

  &.closeBtn {
    background: rgba(239, 68, 68, 0.2);
    border-color: rgba(239, 68, 68, 0.3);

    &:hover {
      background: rgba(239, 68, 68, 0.3);
    }
  }

  &.copyBtn {
    background: rgba(59, 130, 246, 0.2);
    border-color: rgba(59, 130, 246, 0.3);

    &:hover {
      background: rgba(59, 130, 246, 0.3);
    }
  }

  &.downloadBtn {
    background: rgba(34, 197, 94, 0.2);
    border-color: rgba(34, 197, 94, 0.3);

    &:hover {
      background: rgba(34, 197, 94, 0.3);
    }
  }
}

.cardDetailOverlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.95);
  backdrop-filter: blur(12px);
  z-index: 2000;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transition: var(--transition-cosmic);

  &.visible {
    opacity: 1;
  }
}

.cardDetailModal {
  position: relative;
  width: 100%;
  height: 95%;
  max-width: 1200px;
  max-height: 800px;
  background: var(--gradient-cosmic);
  border-radius: 24px;
  border: 2px solid hsl(var(--primary) / 0.3);
  box-shadow: var(--shadow-cosmic), var(--glow-starlight);
  overflow: hidden;
  transform: scale(0.8) translateY(50px);
  opacity: 0;
  transition: var(--transition-cosmic);

  &.visible {
    transform: scale(1) translateY(0);
    opacity: 1;
  }
}

.cosmicBackground {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  z-index: -1;

  .stars {
    position: absolute;
    width: 120%;
    height: 120%;
    background: radial-gradient(
        3px 3px at 50px 80px,
        hsl(var(--primary)),
        transparent
      ),
      radial-gradient(2px 2px at 100px 200px, hsl(var(--accent)), transparent),
      radial-gradient(1px 1px at 200px 50px, white, transparent),
      radial-gradient(2px 2px at 300px 150px, hsl(var(--primary)), transparent),
      radial-gradient(1px 1px at 400px 100px, white, transparent);
    background-repeat: repeat;
    background-size: 400px 300px;
    animation: twinkle 6s ease-in-out infinite;
    opacity: 0.7;
  }

  .cosmicDust {
    position: absolute;
    width: 100%;
    height: 100%;
    background: radial-gradient(
        circle at 20% 80%,
        hsl(var(--accent) / 0.2) 0%,
        transparent 50%
      ),
      radial-gradient(
        circle at 80% 20%,
        hsl(var(--primary) / 0.3) 0%,
        transparent 50%
      ),
      radial-gradient(
        circle at 40% 40%,
        hsl(200 80% 60% / 0.2) 0%,
        transparent 50%
      );
    animation: cosmic-pulse 8s ease-in-out infinite;
  }
}

.detailHeader {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 2rem;
  border-bottom: 1px solid hsl(var(--border));
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(15px);

  .backBtn {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem 1.25rem;
    background: hsl(var(--secondary));
    border: 1px solid hsl(var(--border));
    border-radius: 12px;
    color: hsl(var(--secondary-foreground));
    font-weight: 500;
    cursor: pointer;
    transition: var(--transition-cosmic);

    svg {
      width: 1rem;
      height: 1rem;
    }

    &:hover {
      background: hsl(var(--accent));
      color: hsl(var(--accent-foreground));
      transform: translateX(-3px);
      box-shadow: var(--glow-celestial);
    }
  }

  .cardTitle {
    display: flex;
    align-items: center;
    gap: 1rem;
    @include FontExact.exact-korean-font('size-200') /* was: 2rem */;
    font-weight: 700;
    color: hsl(var(--primary));
    text-shadow: var(--glow-starlight);
    margin: 0;
    text-align: center;

    .titleIcon {
      width: 1.75rem;
      height: 1.75rem;
      animation: cosmic-pulse 4s ease-in-out infinite;
    }

    .reversedIndicator {
      font-size: 1rem;
      font-weight: 500;
      color: hsl(var(--accent));
      background: hsl(var(--accent) / 0.1);
      padding: 0.25rem 0.75rem;
      border-radius: 20px;
      margin-left: 0.5rem;
    }
  }

  .closeBtn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 2.5rem;
    height: 2.5rem;
    background: hsl(var(--destructive) / 0.2);
    border: 1px solid hsl(var(--destructive) / 0.3);
    border-radius: 50%;
    color: hsl(var(--destructive));
    cursor: pointer;
    transition: var(--transition-cosmic);

    svg {
      width: 1.25rem;
      height: 1.25rem;
    }

    &:hover {
      background: hsl(var(--destructive));
      color: hsl(var(--destructive-foreground));
      transform: scale(1.1);
      box-shadow: 0 0 20px hsl(var(--destructive) / 0.5);
    }
  }
}

.detailContent {
  display: flex;
  height: calc(100% - 100px);
  overflow: auto;

  &::-webkit-scrollbar {
    width: 15px;
    height: 15px;
  }

  &::-webkit-scrollbar-track {
    background: rgba(200, 180, 200, 0.6);
    border-radius: 8px;
  }

  &::-webkit-scrollbar-thumb {
    background: linear-gradient(
      180deg,
      hsl(var(--primary)),
      hsl(var(--accent))
    );
    border-radius: 8px;
    border: 2px solid transparent;
    background-clip: padding-box;

    &:hover {
      background: linear-gradient(
        180deg,
        hsl(var(--accent)),
        hsl(var(--primary))
      );
    }
  }
}

.cardDisplay {
  flex: 0 1 50%; // 원래 코드
  max-width: 50%;
  // min-width: 40px;
  // min-width: 260px; // 원래 코드
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 3rem;
  background: rgba(0, 0, 0, 0.2);
  border-right: 1px solid hsl(var(--border));
  position: relative;

  // 테두리 두께 변수 정의 (CardDetailModal용)
  --detail-border-base: 0.2rem;
  --detail-border-mobile: 0.3rem;
  --detail-border-tablet: 0.5rem;

  .cardRim {
    // 동적 테두리 두께 적용
    padding: var(--detail-border-tablet);
    background-color: white;
    display: flex;
    justify-content: center;
    align-items: center;
    border-radius: 12px;
    border: 1px solid black;
    perspective: 1000px;
    animation: float 4s ease-in-out infinite;
    transition: var(--transition-cosmic);
    transform: rotate(var(--card-rotation, 0deg));
  }

  .cardImageContainer {
    border: 1px solid black;
    width: clamp(140px, 28vh, 280px);
    height: auto;
    max-height: min(60vh, 520px);
    position: relative;

    &.reversed {
      /* no container rotation here */
    }

    img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
      background: radial-gradient(
        circle at 50% 50%,
        rgba(255, 255, 255, 0.04),
        transparent 70%
      );
    }

    img:hover {
      transform: rotate(var(--card-rotation, 0deg)) scale(1.02);
      box-shadow: var(--shadow-cosmic), var(--glow-starlight),
        0 0 40px hsl(var(--primary) / 0.6);
    }

    .cardAura {
      position: absolute;
      top: -10px;
      left: -10px;
      right: -10px;
      bottom: -10px;
      background: linear-gradient(
        45deg,
        hsl(var(--primary) / 0.3),
        hsl(var(--accent) / 0.3),
        hsl(var(--primary) / 0.3)
      );
      border-radius: 20px;
      z-index: -1;
      animation: cosmic-pulse 3s ease-in-out infinite;
      filter: blur(8px);
    }
  }
}
.showCard-alt {
  position: absolute;
  bottom: 0;
  left: 0;
  z-index: 1;
}
.showCard {
  position: absolute;
  top: 0;
  right: 0;
  z-index: 1;
}
.toggleCardsBtn {
  @extend .controlBtn;
  align-self: center;
  background: rgba(255, 255, 255, 0.1);

  &:hover {
    background: rgba(255, 255, 255, 0.2);
  }
}

.cardInfo {
  flex: 1;
  min-height: 100%;
  padding: 2rem;
  overflow-y: auto;
  color: hsl(var(--foreground));

  /* Firefox용 속성을 @supports로 분리 */
  @supports not selector(::-webkit-scrollbar) {
    scrollbar-color: #8b5cf6 rgba(45, 21, 84, 0.3);
  }

  /* Webkit 브라우저용 (Chrome, Safari) */
  &::-webkit-scrollbar {
    width: 15px;
    height: 15px;
  }

  &::-webkit-scrollbar-track {
    background: rgba(200, 180, 200, 0.6);
    border-radius: 8px;
  }

  &::-webkit-scrollbar-thumb {
    background: linear-gradient(
      180deg,
      hsl(var(--primary)),
      hsl(var(--accent))
    );
    border-radius: 8px;
    border: 2px solid transparent;
    background-clip: padding-box;

    &:hover {
      background: linear-gradient(
        180deg,
        hsl(var(--accent)),
        hsl(var(--primary))
      );
    }
  }
}

.meaningSection {
  margin-bottom: 2.5rem;
  padding: 2rem;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid hsl(var(--border));
  border-radius: 20px;
  backdrop-filter: blur(12px);
  transition: var(--transition-cosmic);

  &:hover {
    background: rgba(255, 255, 255, 0.08);
    box-shadow: var(--glow-celestial);
    transform: translateY(-2px);
  }

  &.advice {
    background: linear-gradient(
      135deg,
      hsl(var(--primary) / 0.1),
      hsl(var(--accent) / 0.1)
    );
    border-color: hsl(var(--primary) / 0.3);
  }

  .sectionTitle {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    @include FontExact.exact-korean-font('size-150') /* was: 1.5rem */;
    font-weight: 600;
    color: hsl(var(--primary));
    margin-bottom: 1.5rem;
    text-shadow: var(--glow-starlight);

    .icon {
      @include FontExact.exact-korean-font('size-125') /* was: 1.25rem */;
      animation: twinkle 3s ease-in-out infinite;
    }
  }

  .meaningContent {
    line-height: 1.7;

    p {
      margin-bottom: 1rem;
      text-align: justify;

      &:last-child {
        margin-bottom: 0;
      }

      strong {
        color: hsl(var(--accent));
        font-weight: 600;
      }
    }

    .primaryMeaning {
      @include FontExact.exact-korean-font('size-110') /* was: 1.1rem */;
      padding: 1.5rem;
      background: rgba(0, 0, 0, 0.2);
      border-radius: 12px;
      border-left: 4px solid hsl(var(--primary));
    }

    .adviceText {
      @include FontExact.exact-korean-font('size-110') /* was: 1.1rem */;
      font-style: italic;
      color: hsl(var(--primary));
      text-align: center;
      padding: 1.5rem;
      background: rgba(0, 0, 0, 0.3);
      border-radius: 16px;
      border: 2px solid hsl(var(--primary) / 0.3);
      text-shadow: var(--glow-starlight);
    }
  }
}

/* 이미지 클램프 관련 스타일 수정 */
.imageClamp {
  max-height: calc(100vh - 160px);
  aspect-ratio: 2 / 3.5; /* match main card ratio */
  width: min(100%, 520px);
  border: var(--card-border-width, 1px) solid rgba(255, 255, 255, 0.2);
  border-radius: 10px;
  overflow: hidden; /* no empty space around image */
  background: rgba(0, 0, 0, 0.35);
  box-shadow: 0 6px 24px rgba(0, 0, 0, 0.4);
  --card-rotation: 0deg; /* default upright */

  img {
    width: 100% !important;
    height: 100% !important;
    object-fit: cover !important; /* fill without gaps, keep ratio */
    display: block;
    transform: rotate(var(--card-rotation));
  }

  /* Rotate image when reversed */
  &.reversed {
    --card-rotation: 180deg;
  }
}

.reversed {
  --card-rotation: 180deg;
}

// Responsive Design
@media (max-width: 1024px) {
  .cardDetailModal {
    width: 100%;
    height: 100%;
  }

  .detailContent {
    flex-direction: column;
    align-items: center;
  }

  .cardDisplay {
    width: 100%;
    max-width: 100%;
    flex: 0 0 auto;
    padding: 2rem;
    border-right: none;
    border-bottom: 1px solid hsl(var(--border));

    // 태블릿용 테두리 두께
    --detail-border-base: var(--detail-border-tablet);

    .cardRim {
      padding: var(--detail-border-tablet);
    }

    .cardImageContainer {
      width: clamp(100px, 24vh, 220px);
    }
  }

  .cardInfo {
    padding: 1.5rem;
  }

  .meaningSection {
    padding: 1.5rem;
    margin-bottom: 2rem;

    .sectionTitle {
      @include FontExact.exact-korean-font('size-125') /* was: 1.25rem */;
    }
  }
}

@media (max-width: 768px) {
  .detailHeader {
    padding: 1.5rem;

    .cardTitle {
      @include FontExact.exact-korean-font('size-150') /* was: 1.5rem */;

      .titleIcon {
        width: 1.5rem;
        height: 1.5rem;
      }

      .reversedIndicator {
        @include FontExact.exact-korean-font('size-0875') /* was: 0.875rem */;
        padding: 0.25rem 0.5rem;
      }
    }

    .backBtn {
      padding: 0.5rem 1rem;
      @include FontExact.exact-korean-font('size-0875') /* was: 0.875rem */;

      span {
        display: none;
      }
    }
  }

  .cardDisplay {
    padding: 1.5rem;

    // 모바일용 테두리 두께
    --detail-border-base: var(--detail-border-tablet);

    .cardImageContainer {
      width: clamp(100px, 36vh, 140px);
    }
  }

  .cardInfo {
    padding: 1rem;
  }

  .meaningSection {
    padding: 1.25rem;
    margin-bottom: 1.5rem;

    .sectionTitle {
      @include FontExact.exact-korean-font('size-1125') /* was: 1.125rem */;
      margin-bottom: 1rem;
    }

    .meaningContent {
      .primaryMeaning,
      .adviceText {
        padding: 1rem;
        font-size: 1rem;
      }
    }
  }
}

@media (max-width: 480px) {
  .cardInfo,
  .detailContent {
    @supports not selector(::-webkit-scrollbar) {
      scrollbar-color: #8b5cf6 rgba(45, 21, 84, 0.3);
    }

    &::-webkit-scrollbar {
      width: 15px;
      height: 15px;
    }

    &::-webkit-scrollbar-track {
      background: hsl(var(--muted));
      border-radius: 8px;
    }

    &::-webkit-scrollbar-thumb {
      background: linear-gradient(
        180deg,
        hsl(var(--primary)),
        hsl(var(--accent))
      );
      border-radius: 8px;
      border: 2px solid transparent;
      background-clip: padding-box;

      &:hover {
        background: linear-gradient(
          180deg,
          hsl(var(--accent)),
          hsl(var(--primary))
        );
      }
    }
  }

  .cardDetailModal {
    width: 100%;
    height: 100%;
    border-radius: 0;
  }

  .detailHeader {
    padding: 1rem;

    .cardTitle {
      @include FontExact.exact-korean-font('size-125') /* was: 1.25rem */;
      flex-direction: column;
      gap: 0.5rem;
    }
  }

  .cardDisplay {
    padding: 1rem;

    // 소형 모바일용 테두리 두께 (더 얇게)
    --detail-border-base: var(--detail-border-mobile);

    .cardImageContainer {
      width: clamp(110px, 36vh, 140px);
    }
  }

  .meaningSection {
    padding: 1rem;

    .sectionTitle {
      font-size: 1rem;
    }
  }
}

@media (orientation: landscape) {
  .imageClamp {
    max-height: calc(100vh - 140px);
  }
}
// /* Card Detail Module SCSS */
// @import './index.scss';

// .controlBtn {
//   display: inline-flex;
//   align-items: center;
//   gap: 0.375rem;
//   padding: 0.5rem 0.75rem;
//   background: rgba(255, 255, 255, 0.1);
//   border: 1px solid rgba(255, 255, 255, 0.2);
//   border-radius: 8px;
//   color: hsl(var(--foreground));
//   @include FontExact.exact-korean-font('size-075')  /* was: 0.75rem */;
//   font-weight: 500;
//   cursor: pointer;
//   transition: all 0.2s ease;
//   backdrop-filter: blur(10px);
//   white-space: nowrap;

//   svg {
//     width: 0.875rem;
//     height: 0.875rem;
//     flex-shrink: 0;
//   }

//   &:hover {
//     background: rgba(255, 255, 255, 0.2);
//     transform: translateY(-1px);
//     box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
//   }

//   &.closeBtn {
//     background: rgba(239, 68, 68, 0.2);
//     border-color: rgba(239, 68, 68, 0.3);

//     &:hover {
//       background: rgba(239, 68, 68, 0.3);
//     }
//   }

//   &.copyBtn {
//     background: rgba(59, 130, 246, 0.2);
//     border-color: rgba(59, 130, 246, 0.3);

//     &:hover {
//       background: rgba(59, 130, 246, 0.3);
//     }
//   }

//   &.downloadBtn {
//     background: rgba(34, 197, 94, 0.2);
//     border-color: rgba(34, 197, 94, 0.3);

//     &:hover {
//       background: rgba(34, 197, 94, 0.3);
//     }
//   }
// }

// .cardDetailOverlay {
//   position: fixed;
//   top: 0;
//   left: 0;
//   right: 0;
//   bottom: 0;
//   background: rgba(0, 0, 0, 0.95);
//   backdrop-filter: blur(12px);
//   z-index: 2000;
//   display: flex;
//   align-items: center;
//   justify-content: center;
//   opacity: 0;
//   transition: var(--transition-cosmic);

//   &.visible {
//     opacity: 1;
//   }
// }

// .cardDetailModal {
//   position: relative;
//   width: 100%;
//   height: 95%;
//   max-width: 1200px;
//   max-height: 800px;
//   background: var(--gradient-cosmic);
//   border-radius: 24px;
//   border: 2px solid hsl(var(--primary) / 0.3);
//   box-shadow: var(--shadow-cosmic), var(--glow-starlight);
//   overflow: hidden;
//   transform: scale(0.8) translateY(50px);
//   opacity: 0;
//   transition: var(--transition-cosmic);

//   &.visible {
//     transform: scale(1) translateY(0);
//     opacity: 1;
//   }
// }

// .cosmicBackground {
//   position: absolute;
//   top: 0;
//   left: 0;
//   right: 0;
//   bottom: 0;
//   overflow: hidden;
//   z-index: -1;

//   .stars {
//     position: absolute;
//     width: 120%;
//     height: 120%;
//     background: radial-gradient(
//         3px 3px at 50px 80px,
//         hsl(var(--primary)),
//         transparent
//       ),
//       radial-gradient(2px 2px at 100px 200px, hsl(var(--accent)), transparent),
//       radial-gradient(1px 1px at 200px 50px, white, transparent),
//       radial-gradient(2px 2px at 300px 150px, hsl(var(--primary)), transparent),
//       radial-gradient(1px 1px at 400px 100px, white, transparent);
//     background-repeat: repeat;
//     background-size: 400px 300px;
//     animation: twinkle 6s ease-in-out infinite;
//     opacity: 0.7;
//   }

//   .cosmicDust {
//     position: absolute;
//     width: 100%;
//     height: 100%;
//     background: radial-gradient(
//         circle at 20% 80%,
//         hsl(var(--accent) / 0.2) 0%,
//         transparent 50%
//       ),
//       radial-gradient(
//         circle at 80% 20%,
//         hsl(var(--primary) / 0.3) 0%,
//         transparent 50%
//       ),
//       radial-gradient(
//         circle at 40% 40%,
//         hsl(200 80% 60% / 0.2) 0%,
//         transparent 50%
//       );
//     animation: cosmic-pulse 8s ease-in-out infinite;
//   }
// }

// .detailHeader {
//   display: flex;
//   justify-content: space-between;
//   align-items: center;
//   padding: 2rem;
//   border-bottom: 1px solid hsl(var(--border));
//   background: rgba(0, 0, 0, 0.4);
//   backdrop-filter: blur(15px);

//   .backBtn {
//     display: flex;
//     align-items: center;
//     gap: 0.5rem;
//     padding: 0.75rem 1.25rem;
//     background: hsl(var(--secondary));
//     border: 1px solid hsl(var(--border));
//     border-radius: 12px;
//     color: hsl(var(--secondary-foreground));
//     font-weight: 500;
//     cursor: pointer;
//     transition: var(--transition-cosmic);

//     svg {
//       width: 1rem;
//       height: 1rem;
//     }

//     &:hover {
//       background: hsl(var(--accent));
//       color: hsl(var(--accent-foreground));
//       transform: translateX(-3px);
//       box-shadow: var(--glow-celestial);
//     }
//   }

//   .cardTitle {
//     display: flex;
//     align-items: center;
//     gap: 1rem;
//     @include FontExact.exact-korean-font('size-200')  /* was: 2rem */;
//     font-weight: 700;
//     color: hsl(var(--primary));
//     text-shadow: var(--glow-starlight);
//     margin: 0;
//     text-align: center;

//     .titleIcon {
//       width: 1.75rem;
//       height: 1.75rem;
//       animation: cosmic-pulse 4s ease-in-out infinite;
//     }

//     .reversedIndicator {
//       font-size: 1rem;
//       font-weight: 500;
//       color: hsl(var(--accent));
//       background: hsl(var(--accent) / 0.1);
//       padding: 0.25rem 0.75rem;
//       border-radius: 20px;
//       margin-left: 0.5rem;
//     }
//   }

//   .closeBtn {
//     display: flex;
//     align-items: center;
//     justify-content: center;
//     width: 2.5rem;
//     height: 2.5rem;
//     background: hsl(var(--destructive) / 0.2);
//     border: 1px solid hsl(var(--destructive) / 0.3);
//     border-radius: 50%;
//     color: hsl(var(--destructive));
//     cursor: pointer;
//     transition: var(--transition-cosmic);

//     svg {
//       width: 1.25rem;
//       height: 1.25rem;
//     }

//     &:hover {
//       background: hsl(var(--destructive));
//       color: hsl(var(--destructive-foreground));
//       transform: scale(1.1);
//       box-shadow: 0 0 20px hsl(var(--destructive) / 0.5);
//     }
//   }
// }

// .detailContent {
//   display: flex;
//   height: calc(100% - 100px);
//   overflow: auto;

//   &::-webkit-scrollbar {
//     width: 20px;
//     height: 20px;
//   }

//   &::-webkit-scrollbar-track {
//     background: hsl(var(--muted));
//     border-radius: 8px;
//   }

//   &::-webkit-scrollbar-thumb {
//     background: linear-gradient(
//       180deg,
//       hsl(var(--primary)),
//       hsl(var(--accent))
//     );
//     border-radius: 8px;
//     border: 2px solid transparent;
//     background-clip: padding-box;

//     &:hover {
//       background: linear-gradient(
//         180deg,
//         hsl(var(--accent)),
//         hsl(var(--primary))
//       );
//     }
//   }
// }

// .cardDisplay {
//   flex: 0 1 50%;
//   max-width: 50%;
//   min-width: 260px;
//   display: flex;
//   align-items: center;
//   justify-content: center;
//   padding: 3rem;
//   background: rgba(0, 0, 0, 0.2);
//   border-right: 1px solid hsl(var(--border));
//   position: relative;

//   .cardRim {
//     padding: 0.5rem;
//     background-color: white;
//     display: flex;
//     justify-content: center;
//     align-items: center;
//     border-radius: 12px;
//     border: 1px solid black;
//     perspective: 1000px;
//     animation: float 4s ease-in-out infinite;
//     transition: var(--transition-cosmic);
//     transform: rotate(var(--card-rotation, 0deg));
//   }

//   .cardImageContainer {
//     border: 1px solid black;
//     width: clamp(140px, 28vh, 280px);
//     height: auto;
//     max-height: min(60vh, 520px);
//     position: relative;

//     &.reversed {
//       /* no container rotation here */
//     }

//     img {
//       width: 100%;
//       height: 100%;
//       object-fit: cover;
//       display: block;
//       background: radial-gradient(
//         circle at 50% 50%,
//         rgba(255, 255, 255, 0.04),
//         transparent 70%
//       );
//     }

//     img:hover {
//       transform: rotate(var(--card-rotation, 0deg)) scale(1.02);
//       box-shadow: var(--shadow-cosmic), var(--glow-starlight),
//         0 0 40px hsl(var(--primary) / 0.6);
//     }

//     .cardAura {
//       position: absolute;
//       top: -10px;
//       left: -10px;
//       right: -10px;
//       bottom: -10px;
//       background: linear-gradient(
//         45deg,
//         hsl(var(--primary) / 0.3),
//         hsl(var(--accent) / 0.3),
//         hsl(var(--primary) / 0.3)
//       );
//       border-radius: 20px;
//       z-index: -1;
//       animation: cosmic-pulse 3s ease-in-out infinite;
//       filter: blur(8px);
//     }
//   }
// }

// .showCard {
//   position: absolute;
//   top: 0;
//   right: 0;

//   .toggleCardsBtn {
//     @extend .controlBtn;
//     align-self: center;
//     background: rgba(255, 255, 255, 0.1);

//     &:hover {
//       background: rgba(255, 255, 255, 0.2);
//     }
//   }
// }

// .cardInfo {
//   flex: 1;
//   min-height: 100%;
//   padding: 2rem;
//   overflow-y: auto;
//   color: hsl(var(--foreground));

//   /* Firefox용 속성을 @supports로 분리 */
//   @supports not selector(::-webkit-scrollbar) {
// //     scrollbar-color: #8b5cf6 rgba(45, 21, 84, 0.3);
//   }

//   /* Webkit 브라우저용 (Chrome, Safari) */
//   &::-webkit-scrollbar {
//     width: 20px;
//     height: 20px;
//   }

//   &::-webkit-scrollbar-track {
//     background: hsl(var(--muted));
//     border-radius: 8px;
//   }

//   &::-webkit-scrollbar-thumb {
//     background: linear-gradient(
//       180deg,
//       hsl(var(--primary)),
//       hsl(var(--accent))
//     );
//     border-radius: 8px;
//     border: 2px solid transparent;
//     background-clip: padding-box;

//     &:hover {
//       background: linear-gradient(
//         180deg,
//         hsl(var(--accent)),
//         hsl(var(--primary))
//       );
//     }
//   }
// }

// .meaningSection {
//   margin-bottom: 2.5rem;
//   padding: 2rem;
//   background: rgba(255, 255, 255, 0.05);
//   border: 1px solid hsl(var(--border));
//   border-radius: 20px;
//   backdrop-filter: blur(12px);
//   transition: var(--transition-cosmic);

//   &:hover {
//     background: rgba(255, 255, 255, 0.08);
//     box-shadow: var(--glow-celestial);
//     transform: translateY(-2px);
//   }

//   &.advice {
//     background: linear-gradient(
//       135deg,
//       hsl(var(--primary) / 0.1),
//       hsl(var(--accent) / 0.1)
//     );
//     border-color: hsl(var(--primary) / 0.3);
//   }

//   .sectionTitle {
//     display: flex;
//     align-items: center;
//     gap: 0.75rem;
//     @include FontExact.exact-korean-font('size-150')  /* was: 1.5rem */;
//     font-weight: 600;
//     color: hsl(var(--primary));
//     margin-bottom: 1.5rem;
//     text-shadow: var(--glow-starlight);

//     .icon {
//       @include FontExact.exact-korean-font('size-125')  /* was: 1.25rem */;
//       animation: twinkle 3s ease-in-out infinite;
//     }
//   }

//   .meaningContent {
//     line-height: 1.7;

//     p {
//       margin-bottom: 1rem;
//       text-align: justify;

//       &:last-child {
//         margin-bottom: 0;
//       }

//       strong {
//         color: hsl(var(--accent));
//         font-weight: 600;
//       }
//     }

//     .primaryMeaning {
//       @include FontExact.exact-korean-font('size-110')  /* was: 1.1rem */;
//       padding: 1.5rem;
//       background: rgba(0, 0, 0, 0.2);
//       border-radius: 12px;
//       border-left: 4px solid hsl(var(--primary));
//     }

//     .adviceText {
//       @include FontExact.exact-korean-font('size-110')  /* was: 1.1rem */;
//       font-style: italic;
//       color: hsl(var(--primary));
//       text-align: center;
//       padding: 1.5rem;
//       background: rgba(0, 0, 0, 0.3);
//       border-radius: 16px;
//       border: 2px solid hsl(var(--primary) / 0.3);
//       text-shadow: var(--glow-starlight);
//     }
//   }
// }

// /* 이미지 클램프 관련 스타일 추가 */
// .imageClamp {
//   max-height: calc(100vh - 160px);
//   aspect-ratio: 2 / 3.5; /* match main card ratio */
//   width: min(100%, 520px);
//   border: var(--card-border-width, 1px) solid rgba(255, 255, 255, 0.2);
//   border-radius: 10px;
//   overflow: hidden; /* no empty space around image */
//   background: rgba(0, 0, 0, 0.35);
//   box-shadow: 0 6px 24px rgba(0,0,0,0.4);
//   --card-rotation: 0deg; /* default upright */

//   img {
//     width: 100% !important;
//     height: 100% !important;
//     object-fit: cover !important; /* fill without gaps, keep ratio */
//     display: block;
//     transform: rotate(var(--card-rotation));
//   }

//   /* Rotate image when reversed */
//   &.reversed {
//     --card-rotation: 180deg;
//   }
// }

// .reversed {
//   --card-rotation: 180deg;
// }

// // Responsive Design
// @media (max-width: 1024px) {
//   .cardDetailModal {
//     width: 100%;
//     height: 100%;
//   }

//   .detailContent {
//     flex-direction: column;
//     align-items: center;
//   }

//   .cardDisplay {
//     flex: 0 0 auto;
//     padding: 2rem;
//     border-right: none;
//     border-bottom: 1px solid hsl(var(--border));

//     .cardImageContainer {
//       width: clamp(100px, 24vh, 220px);
//     }
//   }

//   .cardInfo {
//     padding: 1.5rem;
//   }

//   .meaningSection {
//     padding: 1.5rem;
//     margin-bottom: 2rem;

//     .sectionTitle {
//       @include FontExact.exact-korean-font('size-125')  /* was: 1.25rem */;
//     }
//   }
// }

// @media (max-width: 768px) {
//   .detailHeader {
//     padding: 1.5rem;

//     .cardTitle {
//       @include FontExact.exact-korean-font('size-150')  /* was: 1.5rem */;

//       .titleIcon {
//         width: 1.5rem;
//         height: 1.5rem;
//       }

//       .reversedIndicator {
//         @include FontExact.exact-korean-font('size-0875')  /* was: 0.875rem */;
//         padding: 0.25rem 0.5rem;
//       }
//     }

//     .backBtn {
//       padding: 0.5rem 1rem;
//       @include FontExact.exact-korean-font('size-0875')  /* was: 0.875rem */;

//       span {
//         display: none;
//       }
//     }
//   }

//   .cardDisplay {
//     padding: 1.5rem;

//     .cardImageContainer {
//       width: clamp(120px, 30vh, 180px);
//     }
//   }

//   .cardInfo {
//     padding: 1rem;
//   }

//   .meaningSection {
//     padding: 1.25rem;
//     margin-bottom: 1.5rem;

//     .sectionTitle {
//       @include FontExact.exact-korean-font('size-1125')  /* was: 1.125rem */;
//       margin-bottom: 1rem;
//     }

//     .meaningContent {
//       .primaryMeaning,
//       .adviceText {
//         padding: 1rem;
//         font-size: 1rem;
//       }
//     }
//   }
// }

// @media (max-width: 480px) {
//   .cardDetailModal {
//     width: 100%;
//     height: 100%;
//     border-radius: 0;
//   }

//   .detailHeader {
//     padding: 1rem;

//     .cardTitle {
//       @include FontExact.exact-korean-font('size-125')  /* was: 1.25rem */;
//       flex-direction: column;
//       gap: 0.5rem;
//     }
//   }

//   .cardDisplay {
//     padding: 1rem;

//     .cardImageContainer {
//       width: clamp(110px, 36vh, 140px);
//     }
//   }

//   .meaningSection {
//     padding: 1rem;

//     .sectionTitle {
//       font-size: 1rem;
//     }
//   }
// }

// @media (orientation: landscape) {
//   .imageClamp {
//     max-height: calc(100vh - 140px);
//   }
// }
