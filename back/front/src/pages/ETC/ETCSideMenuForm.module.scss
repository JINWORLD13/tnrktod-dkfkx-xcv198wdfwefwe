@use '../../styles/scss/Font-Exact.module.scss' as FontExact;
@use '../../styles/scss/App.module.scss';

// 공통 변수 정의
$menu-bg-color: rgba(76, 29, 149, 0.3); // 더 짙은 보라색 배경, 투명도 0.3
$menu-border-color: rgba(
  167,
  139,
  250,
  0.8
); // 보라색 테두리 (마이페이지와 동일)
$menu-padding-left: 10px;
$menu-active-color: goldenrod;

// 공통 믹스인
@mixin menu-base {
  width: 100%;
  background: $menu-bg-color;
  border: 2px solid $menu-border-color;
  backdrop-filter: none; // 블러 효과 제거
  border-radius: 12px;
  box-shadow: 0 0 20px rgba(139, 92, 246, 0.4), 0 0 40px rgba(139, 92, 246, 0.2),
    inset 0 0 30px rgba(139, 92, 246, 0.1); // 은은한 빛나는 효과
  @include App.flex-box-center(column);
  justify-content: start;
  align-items: start;
}

@mixin menu-title-container {
  width: 100%;
  height: auto;
  padding-top: 5px;
  padding-left: $menu-padding-left;
  @include App.flex-box-center(row);
  justify-content: start;

  & > h2 {
    margin: 0;
  }
}

@mixin menu-list-container {
  width: 100%;
  height: auto;
  padding: 0;
  margin: 0;
  flex-grow: 1;
  list-style-type: none;
}

@mixin menu-list-item {
  width: 100%;
  height: auto;
  line-height: 1.4;
  padding-top: 3px;
  padding-bottom: 3px;
  padding-left: $menu-padding-left;
  font-weight: 500;

  &:hover {
    font-weight: 800;
  }

  &:active {
    color: $menu-active-color;
    font-weight: 800;
  }
}

// 기본 메뉴 스타일
.menu {
  @include menu-base;
  height: 100%;

  & > div {
    @include menu-title-container;
  }

  & > ul {
    @include menu-list-container;

    & > li {
      @include menu-list-item;
    }
  }

  .link-style {
    text-decoration: none;
    color: inherit;
  }
}

// 폰트 클래스
.japanese-font-title {
  line-height: 3;
}

.japanese-font-content {
  line-height: 2.5;
}

// 반응형 믹스인
@mixin responsive-menu(
  $height,
  $title-line-height: 1.3,
  $content-line-height: 1.5,
  $title-margin-top: 10px,
  $title-margin-bottom: 20px,
  $korean-margin: 0px,
  $use-dongle-font: false,
  $font-size: null
) {
  .menu {
    height: $height;

    & > div {
      line-height: $title-line-height;
      @include App.flex-box-center(column);
      align-items: start;

      @if $use-dongle-font {
        @include App.dongle-font(1.5rem);
      }
    }

    & > ul {
      @include App.flex-box-center(row);
      justify-content: start;
      align-items: end;
      padding-bottom: 7px;

      & > li {
        width: auto;
        padding: 0px;
        padding-left: $menu-padding-left;

        @if $font-size {
          font-size: $font-size;
        }

        @if $use-dongle-font {
          @include App.dongle-font(1.5rem);
        }
      }
    }
  }

  .japanese-font-title {
    line-height: $content-line-height;
  }

  .japanese-font-content {
    line-height: $content-line-height;
  }

  .menu > div > h2.japanese-font-title {
    margin-top: $title-margin-top;
    margin-bottom: $title-margin-bottom;
  }

  .menu > div > h2.korean-font-title {
    margin-top: $korean-margin;
    margin-bottom: $korean-margin;
  }
}

// 세로 모드 반응형
@media (min-width: 1025px) and (max-width: 1366px) {
  @include responsive-menu(120px, 1.3, 1.5, 10px, 20px);

  .japanese-font-title {
    line-height: 2;
  }
}

@media (min-width: 769px) and (max-width: 1024px) {
  @include responsive-menu(110px, 1.3, 1.5, 10px, 20px);
}

@media (min-width: 481px) and (max-width: 769px) {
  @include responsive-menu(110px, 1.25, 1.5, 10px, 20px);
}

@media (min-width: 415px) and (max-width: 481px) {
  @include responsive-menu(90px, 1.2, 1.5, 10px, 10px, 0px);
}

@media (min-width: 376px) and (max-width: 415px) {
  @include responsive-menu(90px, 1.2, 1.5, 10px, 10px, 0px, false, 1.35rem);
}

@media (min-width: 281px) and (max-width: 376px) {
  @include responsive-menu(90px, 1.15, 1.5, 10px, 10px, 0px, false, 1.35rem);

  .menu > div {
    @include App.flex-box-center(column);
    align-items: start;
  }

  .menu > ul > li {
    @include FontExact.exact-korean-font('size-135') /* was: 1.35rem */;
  }
}

@media (max-width: 281px) {
  @include responsive-menu(90px, 1.3, 1.5, 10px, 10px, 0px, false, 1.35rem);
}

@media (max-width: 273px) {
  @include responsive-menu(auto, 1.3, 1.5, 10px, 10px, 0px, false, 1.35rem);
  .menu {
    & > ul {
      @include App.flex-box-center(column);
      justify-content: end;
      align-items: start;
    }
  }
  .menu {
    width: 100vw;
  }
}

// 가로 모드 반응형
@mixin landscape-responsive(
  $min-width,
  $max-width,
  $padding-top: 0px,
  $use-dongle: false
) {
  @media screen and (orientation: landscape) and (min-device-width: #{$min-width}) and (max-device-width: #{$max-width}) {
    div.menu {
      @if $padding-top > 0 {
        padding-top: $padding-top;
      }
      height: auto;

      & > div {
        height: auto;
        line-height: 1.3;
        padding-left: $menu-padding-left;
        @include App.flex-box-center(column);
        align-items: start;

        @if $use-dongle {
          @include App.dongle-font(1.5rem);
        }
      }

      & > ul {
        height: auto;
        @include App.flex-box-center(row);
        justify-content: start;
        align-items: end;
        padding-bottom: 7px;

        & > li {
          width: auto;
          padding: 0px;
          padding-left: $menu-padding-left;

          @if $use-dongle {
            @include App.dongle-font(1.5rem);
          }
        }
      }
    }

    .japanese-font-title {
      line-height: 1.5;
    }

    .japanese-font-content {
      line-height: 2.5;
    }

    div.menu > div > h2.japanese-font-title {
      margin-top: 10px;
      margin-bottom: 20px;
    }
  }
}

// 가로 모드 적용
@include landscape-responsive(1025px, 1366px);
@include landscape-responsive(933px, 1024px);
@include landscape-responsive(897px, 932px, 50px);
@include landscape-responsive(668px, 896px, 50px);
@include landscape-responsive(654px, 667px, 50px, true);

@media screen and (orientation: landscape) and (max-device-width: 653px) {
  div.menu {
    padding-top: 50px;
    height: auto;

    & > div {
      height: auto;
      line-height: 1.3;
      padding-left: $menu-padding-left;
      @include App.flex-box-center(column);
      align-items: start;
      @include App.dongle-font(1.5rem);
    }

    & > ul {
      height: auto;
      @include App.flex-box-center(row);
      justify-content: start;
      align-items: end;
      padding-bottom: 7px;

      & > li {
        width: auto;
        padding: 0px;
        padding-left: $menu-padding-left;
        @include App.dongle-font(1.5rem);
      }
    }
  }

  .japanese-font-title {
    line-height: 1.5;
  }

  .japanese-font-content {
    line-height: 2.5;
  }

  div.menu > div > h2.japanese-font-title {
    margin-top: 10px;
    margin-bottom: 20px;
  }
}
