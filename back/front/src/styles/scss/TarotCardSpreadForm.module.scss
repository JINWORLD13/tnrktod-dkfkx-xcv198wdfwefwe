@use 'App.module.scss' as App;
@use 'TarotModal.module.scss' as TarotModal;

@mixin flip() {
  // 여기서 애니메이션 장치 부착
  position: relative;
  transform-style: preserve-3d;
  transition: transform 0.5s;
}
@mixin flip-click() {
  // 클릭시 부착해서 반대로 뒤집힌걸 다시 뒤집어 원상복귀(뒷면은 여전히 숨겨져 있겠지만 앞면 보이는 거임)
  transform: rotateY(180deg);
}
@mixin front() {
  // 처음부터 반대로 뒤집고 뒤집었으니 뒷면은 숨겨놓기
  position: absolute;
  transform: rotateY(180deg);
  backface-visibility: hidden;
  z-index: 1;
}
@mixin front-reversed() {
  position: absolute;
  transform: rotateX(180deg);
  backface-visibility: hidden;
  z-index: 1;
}
@mixin front-for-answer-modal-reversed() {
  position: absolute;
  transform: rotateZ(180deg);
  backface-visibility: hidden;
  z-index: 1;
}
@mixin back() {
  // front 아래에 겹쳐서 둘거임. 뒤집으면 안보이도록.
  position: absolute;
  backface-visibility: hidden;
  z-index: 0;
}

@mixin spread-card-rim($size) {
  width: 100%;
  height: 100%;
  margin: auto;
  padding: 10px * $size;
  background-color: white;
  border-radius: 13px * $size;
  border: 1px solid black;
}

@mixin linear-spread-container($size) {
  @include App.flex-box-center(row);
  @include App.no-select;
  @include App.no-drag;
  width: 100%;
  height: 100%;

  //! flip
  & > div {
    @include TarotModal.spread-card($size);
    //& 임시방편... 겹쳐서 나오니 투명처리함.
    // & 고쳐야 함. 뒤집을 때 자리 겹침
    // & spread-card에서 padding 때문에 밀리는듯
    // background-color: transparent;
  }
  //! front, back
  & > div > div {
    @include spread-card-rim($size);
  }
  //! image
  & div > div > img {
    @include App.no-select;
    @include App.no-drag;
    @include TarotModal.card-image(0);
  }
}

@mixin linear-spread-vertical-container($size) {
  @include App.flex-box-center(column);
  @include App.no-select;
  @include App.no-drag;
  width: 100%;
  height: auto;
  flex-wrap: wrap;

  & > div {
    width: 100%;
    @include App.flex-box-center(row);
  }
  & > div:first-child {
    width: auto;
    @include App.flex-box-center(row);
    gap: 120px;
  }
  & > div:nth-child(2) {
    width: auto;
    @include App.flex-box-center(row);
    gap: 20px;
  }

  //! flip
  & > div > div {
    @include TarotModal.spread-card($size);
    //& 임시방편... 겹쳐서 나오니 투명처리함.
    // & 고쳐야 함. 뒤집을 때 자리 겹침
    // & spread-card에서 padding 때문에 밀리는듯
    // background-color: transparent;
  }
  //! front, back
  & > div > div > div {
    @include spread-card-rim($size);
  }
  //! image
  & div > div > div > img {
    @include App.no-select;
    @include App.no-drag;
    @include TarotModal.card-image(0);
  }
}

@mixin grid-spread-container($size) {
  display: grid;
  grid-template-rows: repeat(2, 1fr);
  grid-template-columns: repeat(3, 1fr);
  @include App.grid-gap(0.01);
  width: 100%;
  height: 100%;

  //! flip
  & > div {
    @include TarotModal.spread-card($size);
    //& 임시방편... 겹쳐서 나오니 투명처리함.
    // & 고쳐야 함. 뒤집을 때 자리 겹침
    // & spread-card에서 padding 때문에 밀리는듯
    // background-color: transparent;
  }
  //! front, back
  & > div > div {
    @include spread-card-rim($size);
  }
  //! image
  & div > div > img {
    @include App.no-select;
    @include App.no-drag;
    @include TarotModal.card-image(0);
  }
}

@mixin celtic-cross-spread-container() {
  @include App.flex-box-center(row);
  width: 100%;
  height: 100%;
}

// 1.176
@mixin spread-container($size) {
  @include App.flex-box-center(row);
  width: 100%;
  height: 100%;
  & > div {
    @include TarotModal.spread-card($size);
  }
  & > div > div {
    @include spread-card-rim($size);
  }
  & div > div > img {
    @include App.no-select;
    @include App.no-drag;
    @include TarotModal.card-image(0);
  }
}

.flip {
  @include flip();
}
.flip-click {
  @include flip-click();
}
.front {
  @include front();
}
.back {
  @include back();
}

//~ 디바이스
@media (min-device-width: 1025px) and (max-device-width: 1366px) {
}
//~ 태블릿, 아이패드, 아이패드 프로
@media (min-device-width: 769px) and (max-device-width: 1024px) {
}
//~ 481px ~ 768px 및 태블릿
@media (min-device-width: 481px) and (max-device-width: 768px) {
}
//~ IPhone 14 Pro Max(430px)
@media only screen and (min-device-width: 415px) and (max-device-width: 480px) {
}
//~ 아이폰XR
@media (min-device-width: 376px) and (max-device-width: 414px) {
}
//~ 아이폰 SE
@media (min-device-width: 281px) and (max-device-width: 375px) {
}
//~ 갤럭시 폴드
@media (max-device-width: 280px) {
}

//* 아이패드 프로 가로
@media screen and (orientation: landscape) and (min-device-width: 1025px) and (max-device-width: 1366px) {
}
//* 태블릿 아이패드, 아이패드 프로 가로
@media screen and (orientation: landscape) and (min-device-width: 933px) and (max-device-width: 1024px) {
}
//* IPhon 14 Pro Max 가로모드
@media screen and (orientation: landscape) and (min-device-width: 897px) and (max-device-width: 932px) {
}
//* 아이폰XR 가로모드
@media screen and (orientation: landscape) and (min-device-width: 668px) and (max-device-width: 896px) {
}
//* 아이폰SE 가로모드
@media screen and (orientation: landscape) and (min-device-width: 654px) and (max-device-width: 667px) {
}
//* 갤럭시 폴드 가로모드
@media screen and (orientation: landscape) and (max-device-width: 653px) {
}
